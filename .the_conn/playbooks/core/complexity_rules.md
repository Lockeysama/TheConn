# 复杂度评估规范

本文档定义 The Conn 框架中的复杂度评估标准。

---

## 核心原则

**重要**：在 The Conn 框架中，**不使用时间估算**，而使用**复杂度评分**。

---

## 评分标准

### 评分范围
- **范围**：1.0 - 10.0 分（支持浮点数，如 3.5、6.8）
- **粒度**：建议使用 0.5 的倍数

### 评分参考

| 复杂度 | 描述   | 示例                           | 特征                     |
| ------ | ------ | ------------------------------ | ------------------------ |
| 1.0    | 极简单 | 简单的数据结构定义             | 几乎无逻辑，直接定义     |
| 2.0    | 很简单 | 简单的配置文件、常量定义       | 少量配置，无复杂逻辑     |
| 3.0    | 简单   | 基础的 CRUD 操作、简单接口     | 标准模式，少量逻辑       |
| 4.0    | 较简单 | 带参数验证的 API、简单业务逻辑 | 基础逻辑 + 边界处理      |
| 5.0    | 中等   | 带业务逻辑的功能模块           | 中等逻辑复杂度，多个分支 |
| 6.0    | 较复杂 | 涉及多个实体交互的业务功能     | 多个模块配合，状态管理   |
| 7.0    | 复杂   | 多模块集成、算法实现           | 复杂业务逻辑，多模块交互 |
| 8.0    | 很复杂 | 分布式协调、复杂算法优化       | 高技术难度，性能要求     |
| 9.0    | 极复杂 | 核心架构设计、高难度算法       | 架构级设计，多重约束     |
| 10.0   | 最复杂 | 框架级设计、突破性技术创新     | 创新性设计，极高技术挑战 |

---

## 评分考虑因素

### 1. 技术难度（权重 40%）
- 需要的技术深度
- 算法复杂度
- 技术新颖度
- 性能要求

### 2. 工作量（权重 30%）
- 代码量估计
- 需要编写的模块数
- 测试用例数量
- 文档工作量

### 3. 依赖复杂度（权重 20%）
- 依赖的外部系统数量
- 模块间耦合度
- 接口复杂度
- 数据依赖

### 4. 风险等级（权重 10%）
- 对现有系统的影响
- 技术不确定性
- 业务风险
- 回滚难度

---

## 评分示例

### 示例 1：简单 CRUD（3.0）
```
Story: 创建用户信息表的基础 CRUD API
- 技术难度: 低（标准 ORM 操作）
- 工作量: 小（4 个接口 + 基础测试）
- 依赖: 简单（仅数据库）
- 风险: 低（独立模块）
→ 评分: 3.0
```

### 示例 2：带验证的业务逻辑（5.0）
```
Story: 实现订单状态机管理
- 技术难度: 中（状态转换逻辑）
- 工作量: 中（多状态 + 验证 + 事件）
- 依赖: 中（订单、库存、支付模块）
- 风险: 中（影响订单流程）
→ 评分: 5.0
```

### 示例 3：复杂集成（7.5）
```
Story: 实现分布式事务协调器
- 技术难度: 高（2PC/3PC 协议）
- 工作量: 大（协调器 + 参与者 + 补偿）
- 依赖: 高（多服务协调）
- 风险: 高（影响数据一致性）
→ 评分: 7.5
```

---

## 使用场景

### 在需求拆解时
- 评估每个 Story 的复杂度
- 识别高风险 Story
- 平衡 Story 粒度

### 在规划时
- 计算 Feature/Epic 的总复杂度
- 评估开发优先级
- 识别需要拆分的 Story

### 在进度跟踪时
- 按复杂度统计完成度
- 识别进度风险
- 调整资源分配

---

**最后更新**: 2025-12-16

