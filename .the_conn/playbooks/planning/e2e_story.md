# E2E Story ç”ŸæˆæŒ‡å—

ä½ æ˜¯ä¸€ä½èµ„æ·±çš„è´¨é‡å·¥ç¨‹å¸ˆã€‚ä½ çš„ä»»åŠ¡æ˜¯ä¸º Feature æˆ– Epic ç”Ÿæˆç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯• Storyï¼Œä½¿ç”¨ BDD åœºæ™¯éªŒè¯å®Œæ•´çš„ä¸šåŠ¡æµç¨‹ã€‚

## âš ï¸ é‡è¦ï¼šéµå®ˆåŸºç¡€å…¬çº¦

**æœ¬ Playbook ä¸¥æ ¼éµå®ˆ `@rules/base_rules.md` ä¸­å®šä¹‰çš„æ‰€æœ‰åŸºç¡€å…¬çº¦ã€‚**

**ğŸ“‹ è§„èŒƒå¼•ç”¨**ï¼š

æœ¬ Playbook ä¾èµ–ä»¥ä¸‹è§„èŒƒæ–‡ä»¶ï¼ˆAI å¿…é¡»å…ˆåŠ è½½ï¼‰ï¼š
- **åŸºç¡€å…¬çº¦**: `@rules/base_rules.md` - ç¦æ­¢äº‹é¡¹ã€æ–‡ä»¶è·¯å¾„çº¦å®šã€è´¨é‡æ ‡å‡†
- **æµ‹è¯•ç­–ç•¥**: `@rules/test_strategy_rules.md` - Story ç±»å‹åˆ¤æ–­ã€æµ‹è¯•ç­–ç•¥
- **BDD è¯­è¨€é…ç½®**: `@rules/bdd_language_rules.md` - BDD å…³é”®å­—å’Œæè¿°è¯­è¨€è§„èŒƒ

## æœ¬ Playbook çš„å·¥ä½œèŒƒå›´

**ä¸“æ³¨äº**ï¼š

- âœ… **ç”Ÿæˆ E2E Story æ–‡æ¡£**ï¼šåˆ›å»ºç«¯åˆ°ç«¯æµ‹è¯• Story æ–‡ä»¶
- âœ… **ç¼–å†™ BDD åœºæ™¯**ï¼šä½¿ç”¨ Gherkin æ ¼å¼æè¿°å®Œæ•´ä¸šåŠ¡æµç¨‹
- âœ… **è®¾è®¡æµ‹è¯•ç­–ç•¥**ï¼šè§„åˆ’é›†æˆæµ‹è¯•çš„èŒƒå›´å’Œé‡ç‚¹

---

## E2E Story ç±»å‹

### Feature E2E Story

- **ç”¨é€”**ï¼šéªŒè¯ä¸€ä¸ª Feature å†…å¤šä¸ª Story çš„é›†æˆæµç¨‹
- **ID èŒƒå›´**ï¼šSTORY-97 ~ STORY-99
- **è§¦å‘æ—¶æœº**ï¼šFeature çš„åŠŸèƒ½ Story å…¨éƒ¨å®Œæˆå
- **ä¾èµ–**ï¼šä¾èµ–è¯¥ Feature çš„æ‰€æœ‰åŠŸèƒ½ Story

### Epic E2E Story

- **ç”¨é€”**ï¼šéªŒè¯è·¨ Feature çš„å®Œæ•´ç”¨æˆ·æ—…ç¨‹
- **ID èŒƒå›´**ï¼šSTORY-997 ~ STORY-999
- **è§¦å‘æ—¶æœº**ï¼šEpic çš„æ‰€æœ‰ Feature å®Œæˆå
- **ä¾èµ–**ï¼šä¾èµ–å¤šä¸ª Feature çš„å…³é”® Story

---

## ğŸ“‹ BDD é…ç½®è‡ªåŠ¨è¯»å–

**AI åº”è‡ªåŠ¨ä»ä»¥ä¸‹ä½ç½®è¯»å– BDD é…ç½®**ï¼š

1. **ä¼˜å…ˆè¯»å–**ï¼š`.the_conn/context/global/Testing_Strategy.md`
   - ç¼–ç¨‹è¯­è¨€
   - BDD æ¡†æ¶
   - æè¿°è¯­è¨€
   - Feature æ–‡ä»¶ä½ç½®

2. **å¦‚æœé…ç½®ä¸å®Œæ•´**ï¼š
   - ä»…è¯¢é—®ç¼ºå¤±çš„é…ç½®é¡¹
   - ä¸è¦é‡å¤è¯¢é—®å·²æœ‰çš„é…ç½®

3. **BDD è¯­è¨€é…ç½®è§„åˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰**ï¼š
   - **å…³é”®å­— (Keywords)**: **ç»Ÿä¸€ä½¿ç”¨è‹±æ–‡** (`Feature`, `Scenario`, `Given`, `When`, `Then`, `And` ç­‰)
   - **æè¿° (Descriptions)**: **ä½¿ç”¨é¡¹ç›®äº¤äº’çš„è‡ªç„¶è¯­è¨€**ï¼ˆä» Context è¯»å–æˆ–æ ¹æ®ç”¨æˆ·å¯¹è¯è¯­è¨€è‡ªåŠ¨åˆ¤æ–­ï¼‰

**âš ï¸ é‡è¦**ï¼šç”Ÿæˆ BDD åœºæ™¯æ—¶ï¼Œä¸¥ç¦ç¿»è¯‘ Gherkin å…³é”®å­—ã€‚

---

## å‘½åä¸æ ¼å¼è§„èŒƒ

### ID å‘½åè§„åˆ™

| E2E ç±»å‹    | ID èŒƒå›´         | ç¤ºä¾‹        | è¯´æ˜                      |
| ----------- | --------------- | ----------- | ------------------------- |
| Feature E2E | STORY-97 ~ 99   | `STORY-99`  | Feature å†…å”¯ä¸€ï¼Œå»ºè®®ç”¨ 99 |
| Epic E2E    | STORY-997 ~ 999 | `STORY-999` | Epic å†…å”¯ä¸€ï¼Œå»ºè®®ç”¨ 999   |
| æ€§èƒ½æµ‹è¯•    | STORY-97        | `STORY-97`  | å¦‚éœ€è¦æ€§èƒ½æµ‹è¯•            |

### æ–‡ä»¶å‘½åè§„åˆ™

| E2E ç±»å‹    | æ ¼å¼                                     | ç¤ºä¾‹                                 |
| ----------- | ---------------------------------------- | ------------------------------------ |
| Feature E2E | `STORY-{åºå·}_E2E_{FeatureName}_Flow.md` | `STORY-99_E2E_Auth_Flow.md`          |
| Epic E2E    | `STORY-{åºå·}_Epic_E2E_{EpicName}.md`    | `STORY-999_Epic_E2E_User_Journey.md` |

### æ–‡ä»¶è·¯å¾„

```
.the_conn/epics/EPIC-{åºå·}_{Name}/features/FEAT-{åºå·}_{Name}/stories/STORY-{åºå·}_E2E_{Name}.md
```

### Frontmatter è§„èŒƒ

```yaml
---
id: STORY-99
type: e2e_test
epic: EPIC-01
feature: FEAT-01
status: pending
created: yyyy-mm-dd
depends_on:
  - STORY-01
  - STORY-02
  - STORY-03
---
```

**å­—æ®µè¯´æ˜**ï¼š

- `type`: å›ºå®šä¸º `e2e_test`
- `depends_on`: åˆ—å‡ºè¢«æµ‹è¯•çš„æ‰€æœ‰åŠŸèƒ½ Story

---

## è¾“å‡ºæ ¼å¼

### Feature E2E Story æ¨¡æ¿

```markdown
---
id: STORY-99
type: e2e_test
epic: EPIC-{åºå·}
feature: FEAT-{åºå·}
status: pending
created: yyyy-mm-dd
depends_on:
  - STORY-01
  - STORY-02
  - STORY-03
---

# Story: E2E_{FeatureName}_Flow

## 1. ç›®æ ‡

éªŒè¯ {Feature åç§°} çš„å®Œæ•´ç”¨æˆ·æ—…ç¨‹ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½ Story é›†æˆåèƒ½æ­£ç¡®ååŒå·¥ä½œã€‚

## 2. éªŒæ”¶æ ‡å‡†ï¼ˆBDD åœºæ™¯ï¼‰

{æ ¹æ®é¡¹ç›®çš„ BDD é…ç½®ç”Ÿæˆï¼Œå…³é”®å­—ç»Ÿä¸€ä½¿ç”¨è‹±æ–‡}

Feature: {Feature åç§°å®Œæ•´æµç¨‹}

  Scenario: {ç«¯åˆ°ç«¯åœºæ™¯1 - Happy Path}
    Given {ç”¨æˆ·åˆå§‹çŠ¶æ€}
    When {æ‰§è¡Œå®Œæ•´æ“ä½œæµç¨‹}
    Then {æœ€ç»ˆä¸šåŠ¡ç»“æœ}
    And {ç³»ç»ŸçŠ¶æ€éªŒè¯}

  Scenario: {ç«¯åˆ°ç«¯åœºæ™¯2 - å¼‚å¸¸å¤„ç†}
    Given {æŸä¸ªå‰ç½®æ¡ä»¶}
    When {è§¦å‘å¼‚å¸¸æƒ…å†µ}
    Then {ç³»ç»Ÿæ­£ç¡®å¤„ç†}
    And {ç”¨æˆ·æ”¶åˆ°æ˜ç¡®åé¦ˆ}

  Scenario: {ç«¯åˆ°ç«¯åœºæ™¯3 - æ•°æ®ä¸€è‡´æ€§}
    Given {åˆå§‹æ•°æ®çŠ¶æ€}
    When {è·¨æ¨¡å—æ“ä½œ}
    Then {æ•°æ®ä¿æŒä¸€è‡´}

## 3. æµ‹è¯•èŒƒå›´

**é›†æˆçš„ Stories**:
- STORY-01: {åŠŸèƒ½æè¿°}
- STORY-02: {åŠŸèƒ½æè¿°}
- STORY-03: {åŠŸèƒ½æè¿°}

**æµ‹è¯•é‡ç‚¹**:
- æ¨¡å—é—´æ¥å£é›†æˆ
- æ•°æ®æµè½¬æ­£ç¡®æ€§
- ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹
- å¼‚å¸¸æƒ…å†µå¤„ç†
- æ•°æ®ä¸€è‡´æ€§éªŒè¯

## 4. å®ç°æŒ‡å¯¼

**æµ‹è¯•æ–‡ä»¶ä½ç½®**:
- BDD Feature: `tests/bdd/features/{module}/{feature_name}_flow.feature`
- Step Definitions: `tests/bdd/{language}_test.{ext}`

**æµ‹è¯•ç­–ç•¥**:
- ä½¿ç”¨çœŸå®ç»„ä»¶é›†æˆï¼ˆé¿å…è¿‡åº¦ Mockï¼‰
- æ¨¡æ‹Ÿç”¨æˆ·çœŸå®æ“ä½œè·¯å¾„
- éªŒè¯å…³é”®ä¸šåŠ¡æŒ‡æ ‡
- æµ‹è¯•ä¸»è¦çš„å¼‚å¸¸è·¯å¾„

**æµ‹è¯•æ•°æ®ç®¡ç†**:

*æ•°æ®å‡†å¤‡ï¼ˆæ¨èä½¿ç”¨ Factory Patternï¼‰*ï¼š

**Factory Pattern è¯´æ˜**ï¼š
- ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºæµ‹è¯•æ•°æ®ï¼Œæé«˜å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§
- æ¯ä¸ªå®ä½“å¯¹åº”ä¸€ä¸ª Factory ç±»ï¼Œè´Ÿè´£åˆ›å»ºè¯¥å®ä½“çš„æµ‹è¯•æ•°æ®
- æ”¯æŒé»˜è®¤å€¼å’Œè‡ªå®šä¹‰å€¼ï¼Œçµæ´»ç»„åˆ

**Factory ç¤ºä¾‹**ï¼ˆä»¥ç”¨æˆ·æ•°æ®ä¸ºä¾‹ï¼‰ï¼š

```python
# å·¥å‚ç±»å®šä¹‰
class UserFactory:
    @staticmethod
    def create_user(email=None, password=None, **kwargs):
        return User(
            email=email or f"test_user_{random_id()}@example.com",
            password=password or "Test@1234",
            created_at=kwargs.get('created_at', datetime.now()),
            status=kwargs.get('status', 'active')
        )
    
    @staticmethod
    def create_admin_user(**kwargs):
        return UserFactory.create_user(
            role='admin',
            **kwargs
        )

# ä½¿ç”¨ç¤ºä¾‹
user1 = UserFactory.create_user()
user2 = UserFactory.create_user(email="specific@example.com")
admin = UserFactory.create_admin_user()
```

**Factory Pattern ä¼˜åŠ¿**ï¼š
- âœ… æµ‹è¯•æ•°æ®é›†ä¸­ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
- âœ… æ”¯æŒé»˜è®¤å€¼ï¼Œå‡å°‘é‡å¤ä»£ç 
- âœ… çµæ´»è‡ªå®šä¹‰ï¼Œé€‚åº”ä¸åŒæµ‹è¯•åœºæ™¯
- âœ… æé«˜æµ‹è¯•å¯è¯»æ€§

*ç¯å¢ƒæ¸…ç†*ï¼š
- **æµ‹è¯•å‰ï¼ˆSetupï¼‰**ï¼š
  - æ¸…ç†æ—§çš„æµ‹è¯•æ•°æ®
  - åˆå§‹åŒ–å¿…è¦çš„æµ‹è¯•ç¯å¢ƒ
  - ä½¿ç”¨ Factory åˆ›å»ºæµ‹è¯•æ‰€éœ€çš„åŸºç¡€æ•°æ®
  
- **æµ‹è¯•åï¼ˆTeardownï¼‰**ï¼š
  - æ¸…ç†æµ‹è¯•äº§ç”Ÿçš„æ•°æ®
  - æ¢å¤æ•°æ®åº“/ç¼“å­˜çŠ¶æ€
  - å…³é—­æµ‹è¯•è¿æ¥

*æ•°æ®éš”ç¦»*ï¼š
- ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•æ•°æ®åº“
- Factory åˆ›å»ºçš„æ•°æ®è‡ªåŠ¨æ·»åŠ ç‰¹æ®Šæ ‡è¯†ï¼ˆå¦‚å‰ç¼€ `test_`ï¼‰
- é¿å…æµ‹è¯•æ•°æ®æ±¡æŸ“ç”Ÿäº§ç¯å¢ƒ
```

### Epic E2E Story æ¨¡æ¿

```markdown
---
id: STORY-999
type: e2e_test
epic: EPIC-{åºå·}
feature: FEAT-{æœ€åä¸€ä¸ª}
status: pending
created: yyyy-mm-dd
depends_on:
  - STORY-{å…³é”®Story1}
  - STORY-{å…³é”®Story2}
  - STORY-{å…³é”®Story3}
---

# Story: Epic_E2E_{EpicName}

## 1. ç›®æ ‡

éªŒè¯ {Epic åç§°} çš„å®Œæ•´ç”¨æˆ·æ—…ç¨‹ï¼Œç¡®ä¿è·¨ Feature çš„ä¸šåŠ¡æµç¨‹ç«¯åˆ°ç«¯æ­£å¸¸å·¥ä½œã€‚

## 2. éªŒæ”¶æ ‡å‡†ï¼ˆBDD åœºæ™¯ï¼‰

{æ ¹æ®é¡¹ç›®çš„ BDD é…ç½®ç”Ÿæˆï¼Œå…³é”®å­—ç»Ÿä¸€ä½¿ç”¨è‹±æ–‡}

Feature: {Epic åç§°ç«¯åˆ°ç«¯ç”¨æˆ·æ—…ç¨‹}

  Scenario: å®Œæ•´ç”¨æˆ·æ—…ç¨‹ - Happy Path
    Given {ç”¨æˆ·ä»é›¶å¼€å§‹}
    When {æ‰§è¡Œè·¨ Feature çš„å®Œæ•´æµç¨‹}
    Then {è¾¾æˆ Epic çš„ä¸šåŠ¡ç›®æ ‡}
    And {æ‰€æœ‰å…³é”®æŒ‡æ ‡æ»¡è¶³}

  Scenario: è·¨æ¨¡å—å¼‚å¸¸å¤„ç†
    Given {æŸä¸ª Feature å‡ºç°å¼‚å¸¸}
    When {ç”¨æˆ·ç»§ç»­æ“ä½œ}
    Then {ç³»ç»Ÿä¼˜é›…é™çº§}
    And {ç”¨æˆ·ä½“éªŒä¸å—é‡å¤§å½±å“}

## 3. æµ‹è¯•èŒƒå›´

**æ¶‰åŠçš„ Features**:
- FEAT-01: {åŠŸèƒ½æè¿°}
- FEAT-02: {åŠŸèƒ½æè¿°}
- FEAT-03: {åŠŸèƒ½æè¿°}

**å…³é”® Stories**:
- STORY-{X}: {å…³é”®åŠŸèƒ½ç‚¹}
- STORY-{Y}: {å…³é”®åŠŸèƒ½ç‚¹}

**æµ‹è¯•é‡ç‚¹**:
- è·¨ Feature çš„æ•°æ®æµè½¬
- ç”¨æˆ·å®Œæ•´ä¸šåŠ¡æ—…ç¨‹
- Feature é—´çš„ä¾èµ–å…³ç³»
- ç«¯åˆ°ç«¯æ€§èƒ½è¡¨ç°

## 4. å®ç°æŒ‡å¯¼

**æµ‹è¯•æ–‡ä»¶ä½ç½®**:
- BDD Feature: `tests/bdd/features/{epic_name}_journey.feature`
- Step Definitions: `tests/bdd/{epic_name}_test.{ext}`

**æµ‹è¯•ç­–ç•¥**:
- å®Œå…¨ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆæœ€å°åŒ– Mockï¼‰
- æ¨¡æ‹ŸçœŸå®ç”¨æˆ·åœºæ™¯
- å…³æ³¨å…³é”®ä¸šåŠ¡æŒ‡æ ‡
- éªŒè¯è·¨æ¨¡å—é›†æˆç‚¹
```

---

## BDD åœºæ™¯ç¼–å†™è§„åˆ™

### Gherkin è¯­æ³•ç¤ºä¾‹

```gherkin
Feature: {åç§°}
  Scenario: {åœºæ™¯}
    Given {å‰ç½®}
    When {åŠ¨ä½œ}
    Then {ç»“æœ}
    And {é™„åŠ éªŒè¯}
```

**AI å·¥ä½œæµç¨‹**ï¼šå¼ºåˆ¶ä½¿ç”¨è‹±æ–‡å…³é”®å­— â†’ è¯†åˆ«é¡¹ç›®è‡ªç„¶è¯­è¨€ â†’ ç”Ÿæˆæè¿°æ–‡æœ¬

### åœºæ™¯ç¼–å†™åŸåˆ™

1. **ç«¯åˆ°ç«¯è§†è§’**ï¼šä»ç”¨æˆ·è§†è§’æè¿°å®Œæ•´æµç¨‹
2. **ä¸šåŠ¡è¯­è¨€**ï¼šä½¿ç”¨ä¸šåŠ¡æœ¯è¯­ï¼Œé¿å…æŠ€æœ¯å®ç°ç»†èŠ‚
3. **ç‹¬ç«‹å¯éªŒè¯**ï¼šæ¯ä¸ªåœºæ™¯ç‹¬ç«‹è¿è¡Œ
4. **å…·ä½“å¯æ“ä½œ**ï¼šæ­¥éª¤æ˜ç¡®ï¼Œæ˜“äºå®ç°
5. **è¦†ç›–å…³é”®è·¯å¾„**ï¼šHappy Path + ä¸»è¦å¼‚å¸¸è·¯å¾„

### åœºæ™¯æ•°é‡å»ºè®®

- **Feature E2E**: 2-4 ä¸ªåœºæ™¯
  - 1 ä¸ª Happy Pathï¼ˆå¿…é¡»ï¼‰
  - 1-2 ä¸ªå¼‚å¸¸å¤„ç†åœºæ™¯
  - 1 ä¸ªæ•°æ®ä¸€è‡´æ€§åœºæ™¯ï¼ˆå¦‚éœ€è¦ï¼‰

- **Epic E2E**: 1-3 ä¸ªåœºæ™¯
  - 1 ä¸ªå®Œæ•´ç”¨æˆ·æ—…ç¨‹ï¼ˆå¿…é¡»ï¼‰
  - 1 ä¸ªè·¨æ¨¡å—å¼‚å¸¸å¤„ç†
  - 1 ä¸ªæ€§èƒ½/å‹åŠ›åœºæ™¯ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ç”ŸæˆåŸåˆ™

1. **ä¾èµ–æ˜ç¡®**ï¼š`depends_on` å¿…é¡»åˆ—å‡ºæ‰€æœ‰è¢«æµ‹è¯•çš„åŠŸèƒ½ Story
2. **åœºæ™¯å®Œæ•´**ï¼šè¦†ç›–ç«¯åˆ°ç«¯çš„ä¸»è¦æµç¨‹å’Œå…³é”®å¼‚å¸¸
3. **æµ‹è¯•è·¯å¾„è§„èŒƒ**ï¼šéµå¾ª `tests/bdd/features/{module}/` ç»“æ„
4. **é¿å…è¿‡åº¦è®¾è®¡**ï¼šèšç„¦æ ¸å¿ƒæµç¨‹ï¼Œä¸è¦æµ‹è¯•æ¯ä¸ªç»†èŠ‚
5. **çœŸå®é›†æˆ**ï¼šå°½é‡ä½¿ç”¨çœŸå®ç»„ä»¶ï¼Œå‡å°‘ Mock

---

## ç¤ºä¾‹

### ç¤ºä¾‹ 1: Feature E2E Storyï¼ˆGo + godog + ä¸­æ–‡ï¼‰

```markdown
---
id: STORY-99
type: e2e_test
epic: EPIC-01
feature: FEAT-01
status: pending
created: 2025-12-16
depends_on:
  - STORY-01
  - STORY-02
  - STORY-03
---

# Story: E2E_Auth_Flow

## 1. ç›®æ ‡

éªŒè¯ç”¨æˆ·è®¤è¯åŠŸèƒ½çš„å®Œæ•´æµç¨‹ï¼Œç¡®ä¿æ³¨å†Œã€ç™»å½•ã€æƒé™æ£€æŸ¥ç­‰æ¨¡å—æ­£ç¡®é›†æˆã€‚

## 2. éªŒæ”¶æ ‡å‡†ï¼ˆBDD åœºæ™¯ï¼‰

Feature: ç”¨æˆ·è®¤è¯å®Œæ•´æµç¨‹

  Scenario: æ–°ç”¨æˆ·å®Œæ•´è®¤è¯æ—…ç¨‹
    Given ç³»ç»Ÿä¸­ä¸å­˜åœ¨è¯¥ç”¨æˆ·
    When ç”¨æˆ·æäº¤æ³¨å†Œä¿¡æ¯
    And ç”¨æˆ·ä½¿ç”¨æ³¨å†Œä¿¡æ¯ç™»å½•
    Then ç”¨æˆ·åº”è¯¥æˆåŠŸè¿›å…¥ç³»ç»Ÿ
    And ç”¨æˆ·åº”è¯¥æ‹¥æœ‰é»˜è®¤æƒé™

  Scenario: ç™»å½•å¤±è´¥åé‡è¯•
    Given ç”¨æˆ·å·²æ³¨å†Œ
    When ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨é”™è¯¯å¯†ç ç™»å½•
    And ç”¨æˆ·ä½¿ç”¨æ­£ç¡®å¯†ç é‡æ–°ç™»å½•
    Then ç”¨æˆ·åº”è¯¥æˆåŠŸç™»å½•
    And ç³»ç»Ÿåº”è¯¥è®°å½•ç™»å½•å†å²

  Scenario: æƒé™éªŒè¯é›†æˆ
    Given ç”¨æˆ·å·²ç™»å½•
    When ç”¨æˆ·è®¿é—®éœ€è¦ç‰¹å®šæƒé™çš„åŠŸèƒ½
    Then ç³»ç»Ÿåº”è¯¥æ­£ç¡®éªŒè¯æƒé™
    And æ— æƒé™ç”¨æˆ·åº”è¯¥æ”¶åˆ°æ˜ç¡®æç¤º

## 3. æµ‹è¯•èŒƒå›´

**é›†æˆçš„ Stories**:
- STORY-01: ç”¨æˆ·æ³¨å†Œæ¨¡å—
- STORY-02: ç”¨æˆ·ç™»å½•æ¨¡å—
- STORY-03: æƒé™éªŒè¯æ¨¡å—

**æµ‹è¯•é‡ç‚¹**:
- æ³¨å†Œâ†’ç™»å½•æ•°æ®æµè½¬
- Session ç®¡ç†æ­£ç¡®æ€§
- æƒé™æ£€æŸ¥é›†æˆ
- é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

## 4. å®ç°æŒ‡å¯¼

**æµ‹è¯•æ–‡ä»¶ä½ç½®**:
- BDD Feature: `tests/bdd/features/auth/auth_flow.feature`
- Step Definitions: `tests/bdd/auth_test.go`

**æµ‹è¯•ç­–ç•¥**:
- ä½¿ç”¨çœŸå®æ•°æ®åº“ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰
- ä½¿ç”¨çœŸå® Session å­˜å‚¨
- ä½¿ç”¨ Factory Pattern ç®¡ç†æµ‹è¯•æ•°æ®

**æµ‹è¯•æ•°æ® Factory ç¤ºä¾‹**:

```go
// Go ç‰ˆæœ¬çš„ Factory Pattern
package testutil

type UserFactory struct{}

func (f *UserFactory) CreateUser(opts ...UserOption) *User {
    // é»˜è®¤å€¼
    user := &User{
        Email:     fmt.Sprintf("test_user_%s@example.com", randomID()),
        Password:  "Test@1234",
        Status:    "active",
        CreatedAt: time.Now(),
    }
    
    // åº”ç”¨è‡ªå®šä¹‰é€‰é¡¹
    for _, opt := range opts {
        opt(user)
    }
    
    return user
}

// é€‰é¡¹æ¨¡å¼
type UserOption func(*User)

func WithEmail(email string) UserOption {
    return func(u *User) {
        u.Email = email
    }
}

func WithRole(role string) UserOption {
    return func(u *User) {
        u.Role = role
    }
}

// ä½¿ç”¨ç¤ºä¾‹
user1 := UserFactory{}.CreateUser()
user2 := UserFactory{}.CreateUser(WithEmail("specific@example.com"))
admin := UserFactory{}.CreateUser(WithRole("admin"))
```
```

---

ç°åœ¨ï¼Œè¯·æ ¹æ®ç”¨æˆ·æä¾›çš„ Feature æˆ– Epic ä¿¡æ¯ç”Ÿæˆ E2E Storyã€‚
